<!--
GMod Responsive Loading Screen
File: gmod_loading_screen.html
Instructions:
1) Put this file and the /assets/ folder into your addon or workshop folder, e.g.
   garrysmod/addons/my_loading/html/index.html
   garrysmod/addons/my_loading/html/assets/*
2) If you use a loading screen addon (Simple Loading Screen, Loading Screen V2, etc.)
   point it at the HTML file (index.html) or the folder URL.
3) Replace assets (logo.png, bg.jpg) in /assets/ with your own images.
4) Customize colors, texts and fonts via the CSS variables below.

Notes on responsiveness:
- Layout uses CSS variables, vw/vh and flex to scale to any resolution.
- Safe 'max-width' values and scalable font sizes keep UI readable on very large screens.
- The progress bar is responsive and will match the host's reported progress if the loading system
  injects progress updates via JS. By default the demo simulates progress so you can preview it.

If you want me to: change colors, add player list, show server rules, or convert this into a
Lua VGUI version, tell me which features and provide your logo/background.
-->

<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Загрузка — сервер</title>

<style>
  :root{
    --bg-overlay: rgba(0,0,0,0.45);
    --accent: #6EE7B7;
    --accent-2: #60A5FA;
    --text: #e6eef8;
    --muted: rgba(230,238,248,0.65);
    --bar-height: 0.9vh; /* tiny on very large screens but will scale by container */
    --max-content-width: 1400px;
    --safe-padding: min(3vw, 40px);
    --glass-blur: 8px;
  }
  html,body{height:100%;margin:0;font-family: Inter, Roboto, "Segoe UI", Arial, sans-serif;background:#000;}
  body{background-image: url('assets/bg.jpg');background-size:cover;background-position:center center;background-repeat:no-repeat;display:flex;align-items:center;justify-content:center;color:var(--text)}
  /* overlay to ensure readability */
  .overlay{position:fixed;inset:0;background:var(--bg-overlay);backdrop-filter: blur(2px);}

  .container{position:relative;z-index:5;max-width:var(--max-content-width);width:calc(100% - (var(--safe-padding) * 2));margin:auto;padding:var(--safe-padding);box-sizing:border-box;display:flex;flex-direction:column;gap:2vh}

  .top-row{display:flex;align-items:center;justify-content:space-between;gap:1rem}
  .branding{display:flex;align-items:center;gap:1rem}
  .logo{width:min(12vh,160px);height:auto;flex:0 0 auto}
  .title{font-size:calc(1.8rem + 0.6vw);line-height:1;}
  .subtitle{font-size:calc(0.9rem + 0.2vw);color:var(--muted)}

  /* main card */
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border-radius:18px;padding:clamp(14px,2.2vh,32px);box-shadow:0 10px 30px rgba(0,0,0,0.6);backdrop-filter: blur(var(--glass-blur));display:flex;flex-direction:row;gap:2vh;align-items:center}

  .left{flex:1;min-width:260px}
  .right{width:340px;flex:0 0 340px}

  /* server info */
  .info{display:flex;flex-direction:column;gap:0.6rem}
  .info .line{display:flex;justify-content:space-between;align-items:center}
  .info .label{font-size:calc(0.85rem + 0.1vw);color:var(--muted)}
  .info .value{font-weight:600}

  /* progress */
  .progress-wrap{margin-top:1.4rem}
  .progress-bar{background:rgba(255,255,255,0.06);border-radius:999px;padding:6px}
  .progress-inner{height:calc(var(--bar-height));background:linear-gradient(90deg,var(--accent),var(--accent-2));border-radius:999px;width:0%;transition:width 350ms linear}
  .progress-text{margin-top:8px;font-size:0.9rem;color:var(--muted)}

  /* player list */
  .players{display:flex;flex-direction:column;gap:0.45rem;max-height:36vh;overflow:auto;padding-right:6px}
  .player{display:flex;align-items:center;gap:0.6rem;padding:8px;border-radius:10px;background:rgba(255,255,255,0.02)}
  .avatar{width:36px;height:36px;border-radius:6px;background:linear-gradient(45deg,rgba(255,255,255,0.04),rgba(0,0,0,0.05));flex:0 0 36px}
  .pname{font-weight:600}
  .plevel{font-size:0.85rem;color:var(--muted)}

  /* footer rules */
  .rules{font-size:0.9rem;color:var(--muted);line-height:1.3}

  /* responsive */
  @media (max-width: 900px){
    .card{flex-direction:column;align-items:stretch}
    .right{width:100%;}
    .logo{width:min(9vh,120px)}
  }
  @media (max-width:480px){
    :root{--safe-padding:12px}
    .title{font-size:1.1rem}
    .subtitle{font-size:0.9rem}
  }

  /* small helper for simulate */
  .small{font-size:0.85rem;color:var(--muted)}
</style>

</head>
<body>
  <div class="overlay"></div>
  <div class="container">
    <div class="top-row">
      <div class="branding">
        <img class="logo" src="assets/logo.png" alt="logo">
        <div>
          <div class="title">Название сервера RP</div>
          <div class="subtitle">IP: play.example.ru — Добро пожаловать!</div>
        </div>
      </div>
      <div class="small">Подключение…</div>
    </div>

    <div class="card">
      <div class="left">
        <div class="info">
          <div class="line"><div class="label">Игроки:</div><div class="value" id="players-count">0/64</div></div>
          <div class="line"><div class="label">Карта:</div><div class="value" id="map-name">gm_flatgrass</div></div>
          <div class="line"><div class="label">Время сервера:</div><div class="value" id="server-time">—</div></div>
        </div>

        <div class="progress-wrap">
          <div class="progress-bar"><div id="progress" class="progress-inner"></div></div>
          <div class="progress-text" id="progress-text">Загружено: 0%</div>
        </div>

        <div style="margin-top:1.2rem" class="rules">
          <strong>Правила:</strong>
          <ol style="margin:0.4rem 0 0 1.1rem;padding:0;color:var(--muted)">
            <li>Не гриферить и не использовать баги.</li>
            <li>РП — держите роль и чат.</li>
            <li>Уважайте админов и игроков.</li>
          </ol>
        </div>
      </div>

      <div class="right">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.6rem">
          <div class="label">Онлайн</div>
          <div class="label small">Сервер: stable</div>
        </div>

        <div class="players" id="players-list">
          <!-- player rows inserted by JS -->
        </div>
      </div>
    </div>

    <div style="text-align:center;color:var(--muted);font-size:0.85rem">Нажмите Esc для отмены подключения | Настроено для всех разрешений</div>
  </div>

<script>
// ------------------------------
// Demo JS: simulate progress and players
// In a real-loading integration you may receive messages from Garry's Mod/Lua and update directly
// Example: window.postMessage({type:'gmod_progress', value: 50})
// ------------------------------
(function(){
  let progressEl = document.getElementById('progress');
  let progressText = document.getElementById('progress-text');
  let playersCount = document.getElementById('players-count');
  let playersList = document.getElementById('players-list');
  let mapName = document.getElementById('map-name');
  let serverTime = document.getElementById('server-time');

  function setProgress(p){
    p = Math.max(0, Math.min(100, Math.round(p)));
    progressEl.style.width = p + '%';
    progressText.textContent = 'Загружено: ' + p + '%';
  }

  // fake time
  function updateTime(){
    let d = new Date();
    serverTime.textContent = d.toLocaleString();
  }
  setInterval(updateTime,1000); updateTime();

  // fake players
  let demoPlayers = ["Leha","Sanya","Nikita","Maks","Ira","Oleg","Vlad"];
  function renderPlayers(list){
    playersList.innerHTML = '';
    list.forEach((p,i)=>{
      let el = document.createElement('div'); el.className='player';
      el.innerHTML = '<div class="avatar"></div><div style="flex:1"><div class="pname">'+p+'</div><div class="plevel">Профессия: Гражданин</div></div><div class="small">Ping 32</div>';
      playersList.appendChild(el);
    });
    playersCount.textContent = list.length + '/64';
  }
  renderPlayers(demoPlayers.slice(0,3));

  // demo progress
  let demo = 0; setProgress(0);
  let t = setInterval(()=>{
    demo += Math.random()*8;
    setProgress(demo);
    if(demo>=100){ setProgress(100); clearInterval(t); }
  },300);

  // receive messages from host (if your addon posts them)
  window.addEventListener('message', function(ev){
    try{
      let msg = ev.data;
      if(msg && msg.type === 'gmod_progress') setProgress(msg.value);
      if(msg && msg.type === 'gmod_players') renderPlayers(msg.players||[]);
      if(msg && msg.type === 'gmod_map') mapName.textContent = msg.map || mapName.textContent;
    }catch(e){console.warn(e)}
  });
})();
</script>

</body>
</html>